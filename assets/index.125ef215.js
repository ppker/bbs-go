import{_ as A,b as I,w as V,x as $,I as M,g as R}from"./index.524fc109.js";/* empty css              *//* empty css               */import{a as q,u as E,j as U}from"./index.62d9be8e.js";/* empty css              */import{B as o,C as u,aJ as O,aI as j,F as s,aD as m,aG as a,aL as r,aE as y,aH as t,aM as p,u as i,bA as K,bk as Q,bB as W,bT as X,bU as Y,aV as G,bC as Z,bD as J,ba as ee,bb as te,e as ae,r as N,c as se,b4 as ne,b5 as oe,bE as ie,bF as le,ab as ce,b8 as re,bG as de}from"./arco.bfc06e8a.js";/* empty css               *//* empty css               *//* empty css               */import"./chart.8d130ef7.js";import"./vue.203b0a99.js";const x=g=>(ee("data-v-cc8b3060"),g=g(),te(),g),me={class:"topics"},ue={class:"topic-status"},_e={class:"topic-header"},pe=["src"],he={class:"topic-head-info"},ye={class:"nickname"},ge={class:"topic-metas"},fe={class:"meta-item"},ve=x(()=>s("span",null,"ID:",-1)),ke={class:"meta-item"},be=x(()=>s("span",null,"\u65F6\u95F4:",-1)),we={class:"meta-item"},Se=x(()=>s("span",null,"\u67E5\u770B:",-1)),ze={class:"meta-item"},Ce=x(()=>s("span",null,"\u70B9\u8D5E:",-1)),Ie={class:"meta-item"},Ve=x(()=>s("span",null,"\u8BC4\u8BBA:",-1)),$e={key:0,class:"topic-summary"},Oe={key:1,class:"topic-summary"},Ue={class:"topic-footer"},xe={class:"topic-tags"},De={class:"topic-actions"},Fe={__name:"TopicList",props:{results:{type:Array,default(){return[]}}},emits:["change"],setup(g,{emit:T}){const f=T,c=async n=>{try{await I.form("/api/admin/topic/delete",U({id:n})),V("\u5220\u9664\u6210\u529F"),f("change")}catch(l){$(l)}},_=async n=>{try{await I.form("/api/admin/topic/undelete",U({id:n})),V("\u53D6\u6D88\u5220\u9664\u6210\u529F"),f("change")}catch(l){$(l)}},v=async n=>{try{await I.form("/api/admin/topic/recommend",U({id:n})),V("\u63A8\u8350\u6210\u529F"),f("change")}catch(l){$(l)}},h=async n=>{try{await I.delete(`/api/admin/topic/recommend?id=${n}`),V("\u53D6\u6D88\u63A8\u8350\u6210\u529F"),f("change")}catch(l){$(l)}},L=async n=>{try{await I.form("/api/admin/topic/audit",U({id:n})),V("\u5BA1\u6838\u6210\u529F"),f("change")}catch(l){$(l)}},D=n=>{};return(n,l)=>{const k=K,b=M,z=Q,F=W,P=X,C=Y,w=G,S=Z,B=J;return o(),u("div",me,[g.results&&g.results.length?(o(!0),u(O,{key:0},j(g.results,e=>(o(),u("div",{key:e.id,class:"topic-item"},[s("div",ue,[e.recommend?(o(),m(k,{key:0,color:"green"},{default:a(()=>[r("\u5DF2\u63A8\u8350")]),_:1})):y("",!0),e.status===1?(o(),m(k,{key:1,color:"red"},{default:a(()=>[r("\u5DF2\u5220\u9664")]),_:1})):y("",!0)]),s("div",_e,[t(z,{size:40},{default:a(()=>[e.user.avatar?(o(),u("img",{key:0,src:e.user.avatar},null,8,pe)):(o(),m(b,{key:1}))]),_:2},1024),s("div",he,[s("div",ye,p(e.user.nickname),1),s("div",ge,[s("div",fe,[ve,s("span",null,p(e.id),1)]),s("div",ke,[be,s("span",null,p(("useFormatDate"in n?n.useFormatDate:i(q))(e.createTime)),1)]),s("div",we,[Se,s("span",null,p(e.viewCount),1)]),s("div",ze,[Ce,s("span",null,p(e.likeCount),1)]),s("div",Ie,[Ve,s("span",null,p(e.commentCount),1)])])])]),e.type===0&&e.summary?(o(),u("div",$e,p(e.summary),1)):y("",!0),e.type===1&&e.content?(o(),u("div",Oe,p(e.content),1)):y("",!0),e.imageList&&e.imageList.length?(o(),m(P,{key:2,infinite:"",class:"topic-image-list"},{default:a(()=>[(o(!0),u(O,null,j(e.imageList,(d,H)=>(o(),m(F,{key:H,width:"150",height:"150",class:"image-item","show-loader":"",src:d.url,fit:"cover"},null,8,["src"]))),128))]),_:2},1024)):y("",!0),s("div",Ue,[s("div",xe,[e.node?(o(),m(k,{key:0,color:"green",size:"mini"},{default:a(()=>[r(p(e.node.name),1)]),_:2},1024)):y("",!0),e.tags&&e.tags.length?(o(!0),u(O,{key:1},j(e.tags,d=>(o(),m(k,{key:d.id,size:"mini"},{default:a(()=>[r("#\xA0"+p(d.name),1)]),_:2},1024))),128)):y("",!0)]),s("div",De,[e.status===0?(o(),u(O,{key:0},[t(C,{class:"action-item",href:("useSiteUrl"in n?n.useSiteUrl:i(E))("/topic/"+e.id),target:"_blank"},{default:a(()=>[r("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["href"]),t(C,{class:"action-item",onClick:d=>D(e.id)},{default:a(()=>[r(" \u67E5\u770B\u8BC4\u8BBA ")]),_:2},1032,["onClick"]),e.recommend?(o(),m(S,{key:0,content:"\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u63A8\u8350\uFF1F",onOk:d=>h(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u53D6\u6D88\u63A8\u8350")]),_:1})]),_:2},1032,["onOk"])):!e.recommend&&e.status===0?(o(),m(S,{key:1,content:"\u662F\u5426\u786E\u5B9A\u63A8\u8350\uFF1F",onOk:d=>v(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u63A8\u8350")]),_:1})]),_:2},1032,["onOk"])):y("",!0),t(S,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>c(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])],64)):e.status===1?(o(),m(S,{key:1,content:"\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u5220\u9664\uFF1F",onOk:d=>_(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u53D6\u6D88\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])):e.status===2?(o(),u(O,{key:2},[t(C,{class:"action-item",href:("useSiteUrl"in n?n.useSiteUrl:i(E))("/topic/"+e.id),target:"_blank"},{default:a(()=>[r("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["href"]),t(C,{class:"action-item",onClick:d=>D(e.id)},{default:a(()=>[r("\u67E5\u770B\u8BC4\u8BBA")]),_:2},1032,["onClick"]),t(S,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>c(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"]),t(S,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>L(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5BA1\u6838\u901A\u8FC7")]),_:1})]),_:2},1032,["onOk"])],64)):y("",!0)])])]))),128)):(o(),m(B,{key:1}))])}}},Te=A(Fe,[["__scopeId","data-v-cc8b3060"]]);const Le={class:"container"},Pe={class:"container-header"},Be={class:"container-main"},je={key:0},Ee={style:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},Ne={__name:"index",setup(g){const T=R(),f=ae(!1),c=N({limit:20,page:1}),_=N({page:{page:1,limit:20,total:0},results:[]}),v=se(()=>({total:_.page.total,current:_.page.page,pageSize:_.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0})),h=async()=>{f.value=!0;try{const n=await I.postForm("/api/admin/topic/list",U(c));_.page=n.page,_.results=n.results}finally{f.value=!1}};h();const L=n=>{c.page=n,h()},D=n=>{c.limit=n,h()};return(n,l)=>{const k=ne,b=oe,z=ie,F=le,P=ce,C=G,w=re,S=de,B=J;return o(),u("div",Le,[s("div",Pe,[t(w,{model:i(c),layout:"inline",size:i(T).table.size},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{modelValue:i(c).id,"onUpdate:modelValue":l[0]||(l[0]=e=>i(c).id=e),placeholder:"ID"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(k,{modelValue:i(c).userId,"onUpdate:modelValue":l[1]||(l[1]=e=>i(c).userId=e),placeholder:"\u7528\u6237ID"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(F,{modelValue:i(c).status,"onUpdate:modelValue":l[2]||(l[2]=e=>i(c).status=e),placeholder:"\u72B6\u6001","allow-clear":"",onChange:h},{default:a(()=>[t(z,{value:0,label:"\u6B63\u5E38"}),t(z,{value:1,label:"\u5220\u9664"}),t(z,{value:2,label:"\u5F85\u5BA1\u6838"})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(F,{modelValue:i(c).recommend,"onUpdate:modelValue":l[3]||(l[3]=e=>i(c).recommend=e),placeholder:"\u662F\u5426\u63A8\u8350","allow-clear":"",onChange:h},{default:a(()=>[t(z,{value:1,label:"\u63A8\u8350"}),t(z,{value:0,label:"\u672A\u63A8\u8350"})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(k,{modelValue:i(c).title,"onUpdate:modelValue":l[4]||(l[4]=e=>i(c).title=e),placeholder:"\u6807\u9898"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(C,{type:"primary","html-type":"submit",onClick:h},{icon:a(()=>[t(P)]),default:a(()=>[r(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1},8,["model","size"])]),s("div",Be,[i(_)&&i(_).results?(o(),u("div",je,[t(Te,{results:i(_).results,onChange:h},null,8,["results"]),s("div",Ee,[t(S,{total:i(v).total,current:i(v).current,"page-size":i(v).pageSize,"show-total":i(v).showTotal,"show-jumper":i(v).showJumper,"show-page-size":i(v).showPageSize,onChange:L,onPageSizeChange:D},null,8,["total","current","page-size","show-total","show-jumper","show-page-size"])])])):(o(),m(B,{key:1}))])])}}},Ye=A(Ne,[["__scopeId","data-v-eb25867c"]]);export{Ye as default};
