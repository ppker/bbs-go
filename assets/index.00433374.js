import{_ as N,x as J,w as A,b as I,y as O,z as V,A as $,I as M,g as q,B as K}from"./index.c3037d91.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              */import{B as o,C as m,aJ as L,aI as R,F as s,aD as u,aG as a,aL as r,aE as g,aH as t,aM as p,u as i,bA as Q,bk as W,bB as X,bT as Y,bU as Z,aV as j,bC as ee,bD as G,ba as te,bb as ae,e as se,r as E,c as ne,o as oe,b4 as ie,b5 as le,bE as ce,bF as re,ab as de,b8 as ue,bG as me}from"./arco.bfc06e8a.js";/* empty css               *//* empty css               *//* empty css               */import"./chart.8d130ef7.js";import"./vue.203b0a99.js";const U=f=>(te("data-v-f3a8e80b"),f=f(),ae(),f),_e={class:"topics"},pe={class:"topic-status"},he={class:"topic-header"},ge=["src"],fe={class:"topic-head-info"},ye={class:"nickname"},ve={class:"topic-metas"},ke={class:"meta-item"},be=U(()=>s("span",null,"ID:",-1)),we={class:"meta-item"},ze=U(()=>s("span",null,"\u65F6\u95F4:",-1)),Se={class:"meta-item"},Ce=U(()=>s("span",null,"\u67E5\u770B:",-1)),Ie={class:"meta-item"},Ve=U(()=>s("span",null,"\u70B9\u8D5E:",-1)),$e={class:"meta-item"},Le=U(()=>s("span",null,"\u8BC4\u8BBA:",-1)),Oe={key:0,class:"topic-summary"},Ue={key:1,class:"topic-summary"},Te={class:"topic-image-list"},De={class:"topic-footer"},Fe={class:"topic-tags"},xe={class:"topic-actions"},Be={__name:"TopicList",props:{results:{type:Array,default(){return[]}}},emits:["change"],setup(f,{emit:F}){const y=F,c=async n=>{try{await I.form("/api/admin/topic/delete",O({id:n})),V("\u5220\u9664\u6210\u529F"),y("change")}catch(l){$(l)}},_=async n=>{try{await I.form("/api/admin/topic/undelete",O({id:n})),V("\u53D6\u6D88\u5220\u9664\u6210\u529F"),y("change")}catch(l){$(l)}},v=async n=>{try{await I.form("/api/admin/topic/recommend",O({id:n})),V("\u63A8\u8350\u6210\u529F"),y("change")}catch(l){$(l)}},h=async n=>{try{await I.delete(`/api/admin/topic/recommend?id=${n}`),V("\u53D6\u6D88\u63A8\u8350\u6210\u529F"),y("change")}catch(l){$(l)}},x=async n=>{try{await I.form("/api/admin/topic/audit",O({id:n})),V("\u5BA1\u6838\u6210\u529F"),y("change")}catch(l){$(l)}},T=n=>{};return(n,l)=>{const k=Q,b=M,S=W,D=X,B=Y,C=Z,w=j,z=ee,P=G;return o(),m("div",_e,[f.results&&f.results.length?(o(!0),m(L,{key:0},R(f.results,e=>(o(),m("div",{key:e.id,class:"topic-item"},[s("div",pe,[e.recommend?(o(),u(k,{key:0,color:"green"},{default:a(()=>[r("\u5DF2\u63A8\u8350")]),_:1})):g("",!0),e.status===1?(o(),u(k,{key:1,color:"red"},{default:a(()=>[r("\u5DF2\u5220\u9664")]),_:1})):g("",!0)]),s("div",he,[t(S,{size:40},{default:a(()=>[e.user.avatar?(o(),m("img",{key:0,src:e.user.avatar},null,8,ge)):(o(),u(b,{key:1}))]),_:2},1024),s("div",fe,[s("div",ye,p(e.user.nickname),1),s("div",ve,[s("div",ke,[be,s("span",null,p(e.id),1)]),s("div",we,[ze,s("span",null,p(("useFormatDate"in n?n.useFormatDate:i(J))(e.createTime)),1)]),s("div",Se,[Ce,s("span",null,p(e.viewCount),1)]),s("div",Ie,[Ve,s("span",null,p(e.likeCount),1)]),s("div",$e,[Le,s("span",null,p(e.commentCount),1)])])])]),e.type===0&&e.summary?(o(),m("div",Oe,p(e.summary),1)):g("",!0),e.type===1&&e.content?(o(),m("div",Ue,p(e.content),1)):g("",!0),e.imageList&&e.imageList.length?(o(),u(B,{key:2,infinite:""},{default:a(()=>[s("div",Te,[(o(!0),m(L,null,R(e.imageList,(d,H)=>(o(),u(D,{key:H,width:"150",height:"150",class:"image-item","show-loader":"",src:d.url,fit:"cover"},null,8,["src"]))),128))])]),_:2},1024)):g("",!0),s("div",De,[s("div",Fe,[e.node?(o(),u(k,{key:0,color:"green",size:"mini"},{default:a(()=>[r(p(e.node.name),1)]),_:2},1024)):g("",!0),e.tags&&e.tags.length?(o(!0),m(L,{key:1},R(e.tags,d=>(o(),u(k,{key:d.id,size:"mini"},{default:a(()=>[r("#\xA0"+p(d.name),1)]),_:2},1024))),128)):g("",!0)]),s("div",xe,[e.status===0?(o(),m(L,{key:0},[t(C,{class:"action-item",href:("useSiteURL"in n?n.useSiteURL:i(A))("/topic/"+e.id),target:"_blank"},{default:a(()=>[r("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["href"]),t(C,{class:"action-item",onClick:d=>T(e.id)},{default:a(()=>[r(" \u67E5\u770B\u8BC4\u8BBA ")]),_:2},1032,["onClick"]),e.recommend?(o(),u(z,{key:0,content:"\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u63A8\u8350\uFF1F",onOk:d=>h(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u53D6\u6D88\u63A8\u8350")]),_:1})]),_:2},1032,["onOk"])):!e.recommend&&e.status===0?(o(),u(z,{key:1,content:"\u662F\u5426\u786E\u5B9A\u63A8\u8350\uFF1F",onOk:d=>v(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u63A8\u8350")]),_:1})]),_:2},1032,["onOk"])):g("",!0),t(z,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>c(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])],64)):e.status===1?(o(),u(z,{key:1,content:"\u662F\u5426\u786E\u5B9A\u53D6\u6D88\u5220\u9664\uFF1F",onOk:d=>_(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u53D6\u6D88\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])):e.status===2?(o(),m(L,{key:2},[t(C,{class:"action-item",href:("useSiteURL"in n?n.useSiteURL:i(A))("/topic/"+e.id),target:"_blank"},{default:a(()=>[r("\u67E5\u770B\u8BE6\u60C5")]),_:2},1032,["href"]),t(C,{class:"action-item",onClick:d=>T(e.id)},{default:a(()=>[r("\u67E5\u770B\u8BC4\u8BBA")]),_:2},1032,["onClick"]),t(z,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>c(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"]),t(z,{content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onOk:d=>x(e.id)},{default:a(()=>[t(w,{class:"action-item",size:"mini",type:"primary"},{default:a(()=>[r("\u5BA1\u6838\u901A\u8FC7")]),_:1})]),_:2},1032,["onOk"])],64)):g("",!0)])])]))),128)):(o(),u(P,{key:1}))])}}},Pe=N(Be,[["__scopeId","data-v-f3a8e80b"]]);const Re={class:"container"},Ae={class:"container-header"},Ee={class:"container-main"},Ne={key:0,class:"topic-container"},je={class:"container-footer"},Ge={__name:"index",setup(f){const F=q(),y=se(!1),c=E({limit:20,page:1}),_=E({page:{page:1,limit:20,total:0},results:[]}),v=ne(()=>({total:_.page.total,current:_.page.page,pageSize:_.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0}));oe(()=>{K()});const h=async()=>{y.value=!0;try{const n=await I.postForm("/api/admin/topic/list",O(c));_.page=n.page,_.results=n.results}finally{y.value=!1}};h();const x=n=>{c.page=n,h()},T=n=>{c.limit=n,h()};return(n,l)=>{const k=ie,b=le,S=ce,D=re,B=de,C=j,w=ue,z=G,P=me;return o(),m("div",Re,[s("div",Ae,[t(w,{model:i(c),layout:"inline",size:i(F).table.size},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{modelValue:i(c).id,"onUpdate:modelValue":l[0]||(l[0]=e=>i(c).id=e),placeholder:"ID"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(k,{modelValue:i(c).userId,"onUpdate:modelValue":l[1]||(l[1]=e=>i(c).userId=e),placeholder:"\u7528\u6237ID"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(D,{modelValue:i(c).status,"onUpdate:modelValue":l[2]||(l[2]=e=>i(c).status=e),placeholder:"\u72B6\u6001","allow-clear":"",onChange:h},{default:a(()=>[t(S,{value:0,label:"\u6B63\u5E38"}),t(S,{value:1,label:"\u5220\u9664"}),t(S,{value:2,label:"\u5F85\u5BA1\u6838"})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(D,{modelValue:i(c).recommend,"onUpdate:modelValue":l[3]||(l[3]=e=>i(c).recommend=e),placeholder:"\u662F\u5426\u63A8\u8350","allow-clear":"",onChange:h},{default:a(()=>[t(S,{value:1,label:"\u63A8\u8350"}),t(S,{value:0,label:"\u672A\u63A8\u8350"})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(k,{modelValue:i(c).title,"onUpdate:modelValue":l[4]||(l[4]=e=>i(c).title=e),placeholder:"\u6807\u9898"},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(C,{type:"primary","html-type":"submit",onClick:h},{icon:a(()=>[t(B)]),default:a(()=>[r(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1},8,["model","size"])]),s("div",Ee,[i(_)&&i(_).results?(o(),m("div",Ne,[t(Pe,{results:i(_).results,onChange:h},null,8,["results"])])):(o(),u(z,{key:1}))]),s("div",je,[t(P,{style:{margin:"10px"},total:i(v).total,current:i(v).current,"page-size":i(v).pageSize,"show-total":i(v).showTotal,"show-jumper":i(v).showJumper,"show-page-size":i(v).showPageSize,onChange:x,onPageSizeChange:T},null,8,["total","current","page-size","show-total","show-jumper","show-page-size"])])])}}},tt=N(Ge,[["__scopeId","data-v-0d4e88af"]]);export{tt as default};
