import{j as S,a as R}from"./index.1d773328.js";import{d as U,e as E,r as k,B as O,aD as q,aG as a,aH as e,u as t,aL as b,bO as J,b6 as T,b5 as K,aS as L,bF as A,bG as $,b9 as M,b0 as Q,C as W,F as g,aM as N,ab as X,aV as Y,a5 as Z,bJ as ee,bK as te}from"./arco.2c5416d7.js";import{g as j,b as C,x as I,w as ae}from"./index.132414d9.js";/* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              */import"./chart.a2535dd4.js";import"./vue.cdf9f1d2.js";const oe=U({__name:"Edit",emits:["ok"],setup(G,{expose:p,emit:V}){const y=V,v=j(),m=E(),s=k({visible:!1,isCreate:!1,title:""}),l=E({id:void 0,parentId:void 0,name:void 0,title:void 0,icon:void 0,path:void 0,sortNo:0,status:0}),B={title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},w=E([]),d=async()=>{w.value=await C.get("/api/admin/menu/tree")},_=async()=>{l.value.id=void 0,m.value.resetFields(),s.isCreate=!0,s.title="\u65B0\u589E",await d(),s.visible=!0},F=async c=>{m.value.resetFields(),s.isCreate=!1,s.title="\u7F16\u8F91",await d();try{l.value=await C.get(`/api/admin/menu/${c}`)}catch(o){I(o)}s.visible=!0},x=()=>{m.value.resetFields()},h=async c=>{if(await m.value.validate()){c(!1);return}try{const f=s.isCreate?"/api/admin/menu/create":"/api/admin/menu/update";await C.postForm(f,S(l.value)),ae("\u63D0\u4EA4\u6210\u529F"),y("ok"),c(!0)}catch(f){I(f),c(!1)}};return p({show:_,showEdit:F}),(c,o)=>{const f=J,r=T,i=K,z=L,u=A,D=$,H=M,P=Q;return O(),q(P,{visible:t(s).visible,"onUpdate:visible":o[7]||(o[7]=n=>t(s).visible=n),title:t(s).title,size:t(v).table.size,onCancel:x,onBeforeOk:h},{default:a(()=>[e(H,{ref_key:"formRef",ref:m,model:t(l),rules:B},{default:a(()=>[e(r,{label:"\u4E0A\u7EA7\u83DC\u5355",field:"parentId"},{default:a(()=>[e(f,{modelValue:t(l).parentId,"onUpdate:modelValue":o[0]||(o[0]=n=>t(l).parentId=n),"allow-clear":"",data:t(w),"field-names":{key:"id"},placeholder:"Please select ..."},null,8,["modelValue","data"])]),_:1}),e(r,{label:"\u6807\u9898",field:"title"},{default:a(()=>[e(i,{modelValue:t(l).title,"onUpdate:modelValue":o[1]||(o[1]=n=>t(l).title=n)},null,8,["modelValue"])]),_:1}),e(r,{label:"\u540D\u79F0",field:"name"},{default:a(()=>[e(i,{modelValue:t(l).name,"onUpdate:modelValue":o[2]||(o[2]=n=>t(l).name=n)},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8DEF\u5F84",field:"path"},{default:a(()=>[e(i,{modelValue:t(l).path,"onUpdate:modelValue":o[3]||(o[3]=n=>t(l).path=n)},null,8,["modelValue"])]),_:1}),e(r,{label:"ICON",field:"icon"},{default:a(()=>[e(i,{modelValue:t(l).icon,"onUpdate:modelValue":o[4]||(o[4]=n=>t(l).icon=n)},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6392\u5E8F",field:"sortNo"},{default:a(()=>[e(z,{modelValue:t(l).sortNo,"onUpdate:modelValue":o[5]||(o[5]=n=>t(l).sortNo=n),mode:"button"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u72B6\u6001",field:"status"},{default:a(()=>[e(D,{modelValue:t(l).status,"onUpdate:modelValue":o[6]||(o[6]=n=>t(l).status=n)},{default:a(()=>[e(u,{value:0},{default:a(()=>[b("\u6B63\u5E38")]),_:1}),e(u,{value:1},{default:a(()=>[b("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}}),le={class:"container"},se={class:"container-header"},ne={class:"action-btns"},ie={class:"container-main"},Fe=U({__name:"index",setup(G){const p=j(),V=E(!1),y=E(),v=k({status:0}),m=k({results:[]}),s=async()=>{V.value=!0;try{m.results=await C.postForm("/api/admin/menu/list",S(v))}finally{V.value=!1}};s();const l=()=>{y.value.show()},B=d=>{y.value.showEdit(d)},w=async d=>{const _=[];d.forEach(F=>{_.push(F.id)}),await C.post("/api/admin/menu/update_sort",_),await s()};return(d,_)=>{const F=A,x=$,h=T,c=X,o=Y,f=M,r=Z,i=ee,z=te;return O(),W("div",le,[g("div",se,[e(f,{model:t(v),layout:"inline",size:t(p).table.size},{default:a(()=>[e(h,null,{default:a(()=>[e(x,{modelValue:t(v).status,"onUpdate:modelValue":_[0]||(_[0]=u=>t(v).status=u),placeholder:"\u72B6\u6001","allow-clear":"",onChange:s},{default:a(()=>[e(F,{value:0,label:"\u6B63\u5E38"}),e(F,{value:1,label:"\u7981\u7528"})]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:a(()=>[e(o,{type:"primary","html-type":"submit",onClick:s},{icon:a(()=>[e(c)]),default:a(()=>[b(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1},8,["model","size"]),g("div",ne,[e(o,{type:"primary",size:t(p).table.size,onClick:l},{icon:a(()=>[e(r)]),default:a(()=>[b(" \u65B0\u589E ")]),_:1},8,["size"])])]),g("div",ie,[e(z,{loading:t(V),data:t(m).results,size:t(p).table.size,bordered:t(p).table.bordered,pagination:!1,"show-empty-tree":"","column-resizable":"",draggable:{type:"handle",width:40},onChange:w},{columns:a(()=>[e(i,{title:"\u6807\u9898","data-index":"title"}),e(i,{title:"\u540D\u79F0","data-index":"name"}),e(i,{title:"ICON","data-index":"icon"}),e(i,{title:"\u8DEF\u5F84","data-index":"path"}),e(i,{title:"\u6392\u5E8F","data-index":"sortNo"}),e(i,{title:"\u72B6\u6001","data-index":"status"},{cell:a(({record:u})=>[b(N(u.status===0?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:1}),e(i,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"},{cell:a(({record:u})=>[b(N(("useFormatDate"in d?d.useFormatDate:t(R))(u.createTime)),1)]),_:1}),e(i,{title:"\u64CD\u4F5C"},{cell:a(({record:u})=>[e(o,{type:"primary",size:t(p).table.size,onClick:D=>B(u.id)},{default:a(()=>[b("\u7F16\u8F91")]),_:2},1032,["size","onClick"])]),_:1})]),_:1},8,["loading","data","size","bordered"])]),e(oe,{ref_key:"edit",ref:y,onOk:s},null,512)])}}});export{Fe as default};
