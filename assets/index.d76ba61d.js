import{j as A,a as J}from"./index.1d773328.js";import{d as D,e as V,r as x,B as S,aD as I,aG as a,aH as e,u as t,aL as f,b5 as N,b6 as G,bL as R,bF as L,bG as P,b9 as H,b0 as K,c as Q,o as W,C as X,F as w,aE as Y,aM as O,ab as Z,aV as ee,a5 as te,bJ as ae,bC as le,bK as oe}from"./arco.2c5416d7.js";import{g as M,b as U,x as T,w as se}from"./index.132414d9.js";/* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               */import{I as ue}from"./ImageUpload.4ab24d0a.js";import{u as ne}from"./height.78eba64d.js";import"./chart.a2535dd4.js";import"./vue.cdf9f1d2.js";const ie=D({__name:"Edit",emits:["ok"],setup($,{expose:_,emit:b}){const g=b,r=M(),d=V(),m=x({visible:!1,isCreate:!1,title:""}),l=V({id:"",title:"",url:"",logo:"",summary:"",status:0}),y={title:[{required:!0,message:"\u8BF7\u586B\u5199\u6807\u9898"}],url:[{required:!0,message:"\u8BF7\u586B\u5199\u94FE\u63A5"}]},C=()=>{d.value.resetFields(),m.isCreate=!0,m.title="\u65B0\u589E",m.visible=!0},B=async i=>{d.value.resetFields(),m.isCreate=!1,m.title="\u7F16\u8F91";try{l.value=await U.get(`/api/admin/link/${i}`)}catch(s){T(s)}m.visible=!0},E=()=>{d.value.resetFields()},n=async i=>{if(await d.value.validate()){i(!1);return}try{const c=m.isCreate?"/api/admin/link/create":"/api/admin/link/update";await U.postForm(c,A(l.value)),se("\u63D0\u4EA4\u6210\u529F"),g("ok"),i(!0)}catch(c){T(c),i(!1)}};return _({show:C,showEdit:B}),(i,s)=>{const c=N,p=G,k=R,v=L,F=P,z=H,h=K;return S(),I(h,{visible:t(m).visible,"onUpdate:visible":s[5]||(s[5]=o=>t(m).visible=o),title:t(m).title,size:t(r).table.size,onCancel:E,onBeforeOk:n},{default:a(()=>[e(z,{ref_key:"formRef",ref:d,model:t(l),rules:y},{default:a(()=>[e(p,{field:"title",label:"\u6807\u9898"},{default:a(()=>[e(c,{modelValue:t(l).title,"onUpdate:modelValue":s[0]||(s[0]=o=>t(l).title=o)},null,8,["modelValue"])]),_:1}),e(p,{field:"url",label:"\u94FE\u63A5"},{default:a(()=>[e(c,{modelValue:t(l).url,"onUpdate:modelValue":s[1]||(s[1]=o=>t(l).url=o)},null,8,["modelValue"])]),_:1}),e(p,{field:"logo",label:"LOGO"},{default:a(()=>[e(ue,{modelValue:t(l).logo,"onUpdate:modelValue":s[2]||(s[2]=o=>t(l).logo=o)},null,8,["modelValue"])]),_:1}),e(p,{field:"summary",label:"\u63CF\u8FF0"},{default:a(()=>[e(k,{modelValue:t(l).summary,"onUpdate:modelValue":s[3]||(s[3]=o=>t(l).summary=o),"allow-clear":""},null,8,["modelValue"])]),_:1}),e(p,{field:"status",label:"\u72B6\u6001"},{default:a(()=>[e(F,{modelValue:t(l).status,"onUpdate:modelValue":s[4]||(s[4]=o=>t(l).status=o)},{default:a(()=>[e(v,{value:0},{default:a(()=>[f("\u6B63\u5E38")]),_:1}),e(v,{value:1},{default:a(()=>[f("\u5220\u9664")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}}),re={class:"container"},de={class:"container-header"},me={class:"action-btns"},ce={class:"container-main"},we=D({__name:"index",setup($){const _=M(),b=V(!1),g=V(),r=x({limit:20,page:1,title:"",url:"",status:0}),d=x({page:{page:1,limit:20,total:0},results:[]}),m=Q(()=>({total:d.page.total,current:d.page.page,pageSize:d.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));W(()=>{ne()});const l=async()=>{b.value=!0;try{const n=await U.postForm("/api/admin/link/list",A(r));d.page=n.page,d.results=n.results}finally{b.value=!1}};l();const y=()=>{g.value.show()},C=n=>{g.value.showEdit(n)},B=n=>{r.page=n,l()},E=n=>{r.limit=n,l()};return(n,i)=>{const s=N,c=G,p=L,k=P,v=Z,F=ee,z=H,h=te,o=ae,j=le,q=oe;return S(),X("div",re,[w("div",de,[e(z,{model:t(r),layout:"inline",size:t(_).table.size},{default:a(()=>[e(c,null,{default:a(()=>[e(s,{modelValue:t(r).title,"onUpdate:modelValue":i[0]||(i[0]=u=>t(r).title=u),placeholder:"\u6807\u9898"},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(s,{modelValue:t(r).url,"onUpdate:modelValue":i[1]||(i[1]=u=>t(r).url=u),placeholder:"\u94FE\u63A5"},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(k,{modelValue:t(r).status,"onUpdate:modelValue":i[2]||(i[2]=u=>t(r).status=u),placeholder:"\u72B6\u6001","allow-clear":"",onChange:l},{default:a(()=>[e(p,{value:0,label:"\u6B63\u5E38"}),e(p,{value:1,label:"\u5220\u9664"})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(F,{type:"primary","html-type":"submit",onClick:l},{icon:a(()=>[e(v)]),default:a(()=>[f(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1},8,["model","size"]),w("div",me,[e(F,{type:"primary",size:t(_).table.size,onClick:y},{icon:a(()=>[e(h)]),default:a(()=>[f(" \u65B0\u589E ")]),_:1},8,["size"])])]),w("div",ce,[e(q,{loading:t(b),data:t(d).results,size:t(_).table.size,bordered:t(_).table.bordered,pagination:t(m),"sticky-header":!0,style:{height:"100%"},"column-resizable":"",onPageChange:B,onPageSizeChange:E},{columns:a(()=>[e(o,{title:"\u7F16\u53F7","data-index":"id"}),e(o,{title:"\u6807\u9898","data-index":"title"}),e(o,{title:"\u94FE\u63A5","data-index":"url"}),e(o,{title:"LOGO","data-index":"logo"},{cell:a(({record:u})=>[u.logo?(S(),I(j,{key:0,width:"60",height:"60",fit:"cover",src:u.logo},null,8,["src"])):Y("",!0)]),_:1}),e(o,{title:"\u63CF\u8FF0","data-index":"summary"}),e(o,{title:"\u72B6\u6001","data-index":"status"},{cell:a(({record:u})=>[f(O(u.status===0?"\u6B63\u5E38":"\u5220\u9664"),1)]),_:1}),e(o,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"},{cell:a(({record:u})=>[f(O(("useFormatDate"in n?n.useFormatDate:t(J))(u.createTime)),1)]),_:1}),e(o,{title:"\u64CD\u4F5C"},{cell:a(({record:u})=>[e(F,{type:"primary",size:t(_).table.size,onClick:pe=>C(u.id)},{default:a(()=>[f("\u7F16\u8F91")]),_:2},1032,["size","onClick"])]),_:1})]),_:1},8,["loading","data","size","bordered","pagination"])]),e(ie,{ref_key:"edit",ref:g,onOk:l},null,512)])}}});export{we as default};
